<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DESPENSA MOCHE</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
 /* Estilos generales */
/* Estilos generales */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background-image: url('img/bodychakupe.jpg');
    color: #615f5fee;
    line-height: 1.6;
    position: relative;
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    min-height: 100vh;
    margin: 0;
}

body::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.884);
    z-index: -1;
}

/* Header principal: Flexbox para el layout */
.main-header {
    background-color: rgba(0, 0, 0, 0.685);
    color: rgb(0, 0, 0);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    padding: 0 20px;
}

.header-inner {
    max-width: 1200px;
    margin: 0 auto;
    height: 180px;
    display: flex;
    justify-content: space-between; /* Espacia los elementos */
    align-items: center;
    flex-wrap: nowrap;
    gap: 20px;
}

/* --- ORDEN CORREGIDO --- */

/* Logo a la izquierda (Primer elemento visible) */
.logo-container {
    order: 1; 
    display: flex;
    align-items: center;
    height: 100px;
}

.logo-container img {
    width: 120px;
    height: 160px;
    border: 3px solid transparent;
    border-radius: 3px;
    transition: all 0.3s ease;
}

.logo-container img:hover {
    border: 2px solid rgba(35, 36, 36, 0.897);
    box-shadow: 0 0 15px rgba(61, 63, 63, 0.897);
}

/* Título al centro (Segundo elemento visible) */
.titulo {
    order: 2; 
    text-align: center;
    flex-grow: 1; 
}

.titulo h1 {
    font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    color: #ffffffd2;
    font-size: 2.5em;
    margin: 0;
    text-shadow: 5px 5px 10px rgba(0, 0, 0, 1);
}

/* Iconos de usuario y carrito a la derecha (Tercer elemento visible) */
.user-cart {
    order: 3; 
    display: flex;
    align-items: center;
    gap: 15px;
    color: white;
}

/* --- FIN DEL ORDEN CORREGIDO --- */

/* Iconos de usuario y carrito - estilos generales */
.user-icon, .cart-icon {
    position: relative;
    width: 30px;
    height: 30px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.1);
    transition: background-color 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.user-icon:hover, .cart-icon:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.cart-count {
    position: absolute;
    top: 2px;
    right: 2px;
    background-color: #d32f2f;
    color: white;
    font-size: 12px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

#logout-btn {
    background-color: #dc3545;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    display: none;
    margin-left: 10px;
    transition: background-color 0.3s;
}

#logout-btn:hover {
    background-color: #c82333;
}

/* Login Popup */
.user-auth {
    position: absolute;
    top: 60px;
    right: 0;
    background-color: white;
    border: 1px solid #ccc;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    display: none;
    flex-direction: column;
    gap: 10px;
    z-index: 1000;
    min-width: 250px;
}

.user-auth input {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.user-auth button {
    padding: 8px 15px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.user-auth button:hover {
    background-color: #0056b3;
}

.user-auth .cerrar {
    align-self: flex-end;
    font-size: 1.2em;
    color: #dc3545;
    cursor: pointer;
}

/* Media Query para móvil */
@media (max-width: 768px) {
    .header-inner {
        flex-direction: column; /* Apila los elementos en columna */
        height: auto;
        padding: 10px 0;
        text-align: center;
        gap: 10px;
    }
    .user-cart {
        order: 3; /* Mueve los iconos abajo en móviles */
        justify-content: center;
        width: 100%;
    }
    .titulo {
        order: 2; /* Mantiene el título en el medio */
        margin-top: 10px;
    }
    .logo-container {
        order: 1; /* Mueve el logo arriba en móviles */
        justify-content: center;
    }
    .logo-container img {
        width: 150px;
        height: auto;
    }
}

/* --- Product Items (Precio Container) --- */
.precio-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 40px;
    padding: 10px 20px;
    max-width: 1330px;
    margin: 0 auto;
}

.precio-item {
    background-color: rgba(0, 0, 0, 0.171);
    border: 2px solid #fffafa8f;
    border-radius: 10px;
    padding: 20px;
    top: 30px;
    width: 250px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: transform 0.3s;
}

.precio-item:hover {
    transform: translateY(-5px);
}

.zoom-container {
    width: 100%;
    height: 200px; 
    overflow: hidden;
    border-radius: 8px;
    margin-bottom: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); 
}

.zoom-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background-color: #f0f0f0;
    border-radius: 8px;
    display: block;
    transition: transform 0.3s ease;
}

.zoom-container img:hover {
    transform: scale(1.05); 
}

.precio-item h4 {
    font-size: 1em;
    color:rgb(253, 253, 253);
    margin-bottom: 5px;
}

.precio-item h5 {
    font-size: 0.9em;
    color: #aaa5a5;
    margin-bottom: 15px;
}

.cantidad-control {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 15px;
}

.cantidad-control button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.7em;
    transition: background-color 0.3s;
}

.cantidad-control button:hover {
    background-color: #0056b3;
}

.cantidad-control input {
    width: 40px;
    text-align: center;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 5px;
}

.add-to-cart {
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 5px;
    font-size: 0.8em;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.3s;
}

.add-to-cart:hover {
    background-color: #45a049;
}

/* --- Shopping Cart Popup --- */
.shopping-cart {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 350px;
    background: white;
    border: 1px solid #ccc;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    z-index: 999;
    display: none;
    max-height: 80vh;
    overflow-y: auto;
}

.shopping-cart h2 {
    text-align: center;
    color: #d32f2f;
    margin-bottom: 15px;
}

.cart-items-list {
    list-style: none;
    padding: 0;
    margin-bottom: 15px;
    border-top: 1px solid #eee;
}

.cart-items-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px dashed #eee;
    font-size: 0.95em;
}

.cart-items-list li:last-child {
    border-bottom: none;
}

.cart-items-list li .remove-item-btn {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85em;
}

.cart-items-list li .remove-item-btn:hover {
    background-color: #d32f2f;
}

.cart-total-display {
    text-align: right;
    font-size: 1.3em;
    font-weight: bold;
    margin-top: 15px;
    color: #007bff;
    border-top: 2px solid #eee;
    padding-top: 10px;
}

.cart-actions-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 20px;
}

.cart-actions-buttons button {
    padding: 12px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 1.1em;
    transition: background-color 0.3s;
}

.cart-actions-buttons .pagar-btn {
    background-color: #28a745;
    color: white;
}

.cart-actions-buttons .pagar-btn:hover {
    background-color: #218838;
}

.cart-actions-buttons .pagar-btn i {
    margin-right: 10px;
}

.cart-actions-buttons .cerrar-cart-btn {
    background-color: #6c757d;
    color: white;
}

.cart-actions-buttons .cerrar-cart-btn:hover {
    background-color: #5a6268;
}

/* --- WhatsApp Floating Button --- */
.whatsapp-float {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background-color: #25d366;
    color: white;
    padding: 12px 18px;
    border-radius: 50px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1em;
    text-decoration: none;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    z-index: 999;
    transition: transform 0.3s;
}

.whatsapp-float:hover {
    transform: scale(1.05);
}

.whatsapp-float img {
    width: 28px;
    height: 28px;
}

/* Media Query para WhatsApp flotante en móvil */
@media (max-width: 768px) {
    .whatsapp-float span {
        display: none;
    }
    .whatsapp-float {
        padding: 12px;
    }
}

/* --- Footer --- */
footer {
    background-color: #080808;
    color: white;
    padding: 30px 20px;
    text-align: center;
    margin-top: 50px;
}

footer .text {
    margin: 15px 0 10px;
    font-size: 1.1em;
}

.redes-sociales {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 10px;
}

.redes-sociales a img {
    width: 40px;
    height: 40px;
    border-radius: 25px;
    object-fit: contain;
    background-color: rgb(78, 77, 77);
    padding: 4px;
    box-sizing: border-box;
    transition: transform 0.3s;
}

.redes-sociales a img:hover {
    transform: translateY(-3px) scale(1.1);
}
@media (max-width: 375px) {
    /* --- Product Items (Precio Container) --- */
    body {
    font-family: Arial, Helvetica, sans-serif;
    background-image: url('bodychakupe.jpg');
    color: #615f5fee;
    line-height: 1.6;
    position: relative;
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    min-height: 100vh;
    margin: 0;
}

body::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.884);
    z-index: -1;
}

/* Header principal: Flexbox para el layout */
.main-header {
    background-color: rgba(0, 0, 0, 0.685);
    color: rgb(0, 0, 0);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    padding: 0 20px;
}

.header-inner {
    max-width: 1200px;
    margin: 0 auto;
    height: 180px;
    display: flex;
    justify-content: space-between; /* Espacia los elementos */
    align-items: center;
    flex-wrap: nowrap;
    gap: 20px;
}

/* --- ORDEN CORREGIDO --- */

/* Logo a la izquierda (Primer elemento visible) */
.logo-container {
    order: 1; 
    display: flex;
    align-items: center;
    height: 100px;
}

.logo-container img {
    width: 120px;
    height: 160px;
    border: 3px solid transparent;
    border-radius: 3px;
    transition: all 0.3s ease;
}

.logo-container img:hover {
    border: 2px solid rgba(35, 36, 36, 0.897);
    box-shadow: 0 0 15px rgba(61, 63, 63, 0.897);
}

/* Título al centro (Segundo elemento visible) */
.titulo {
    order: 2; 
    text-align: center;
    flex-grow: 1; 
}

.titulo h1 {
    font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    color: #ffffffd2;
    font-size: 1.5em;
    margin: 0;
    text-shadow: 5px 5px 10px rgba(0, 0, 0, 1);
}

/* Iconos de usuario y carrito a la derecha (Tercer elemento visible) */
.user-cart {
    order: 3; 
    display: flex;
    align-items: center;
    gap: 15px;
    color: white;
}

/* --- FIN DEL ORDEN CORREGIDO --- */

/* Iconos de usuario y carrito - estilos generales */
.user-icon, .cart-icon {
    position: relative;
    width: 25px;
    height: 25px;
    font-size: 0.8;
    cursor: pointer;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.1);
    transition: background-color 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    
}

.user-icon:hover, .cart-icon:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.cart-count {
    position: center;
    top: 2px;
    right: 2px;
    background-color: #d32f2f;
    color: white;
    font-size: 0.8;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

#logout-btn {
    background-color: #dc3545;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    display: none;
    margin-left: 10px;
    transition: background-color 0.3s;
}

#logout-btn:hover {
    background-color: #c82333;
}

/* Login Popup */
.user-auth {
    position: absolute;
    top: 0;
    right: 0;
    background-color: white;
    border: 1px solid #ccc;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    display: none;
    flex-direction: column;
    gap: 10px;
    z-index: 100;
    min-width: 250px;
}

.user-auth input {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.user-auth button {
    padding: 8px 15px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.user-auth button:hover {
    background-color: #0056b3;
}

.user-auth .cerrar {
    align-self: flex-end;
    font-size: 1.2em;
    color: #dc3545;
    cursor: pointer;
}
.precio-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 40px;
    padding: 10px 20px;
    max-width: 1330px;
    margin: 0 auto;
}

.precio-item {
    background-color: rgba(0, 0, 0, 0.171);
    border: 2px solid #fffafa8f;
    border-radius: 10px;
    padding: 20px;
    top: 30px;
    width: 250px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: transform 0.3s;
}

.precio-item:hover {
    transform: translateY(-5px);
}

.zoom-container {
    width: 100%;
    height: 200px; 
    overflow: hidden;
    border-radius: 8px;
    margin-bottom: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); 
}

.zoom-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background-color: #f0f0f0;
    border-radius: 8px;
    display: block;
    transition: transform 0.3s ease;
}

.zoom-container img:hover {
    transform: scale(1.05); 
}

.precio-item h4 {
    font-size: 1em;
    color:rgb(253, 253, 253);
    margin-bottom: 5px;
}

.precio-item h5 {
    font-size: 0.9em;
    color: #aaa5a5;
    margin-bottom: 15px;
}

.cantidad-control {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 15px;
}

.cantidad-control button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.7em;
    transition: background-color 0.3s;
}

.cantidad-control button:hover {
    background-color: #0056b3;
}

.cantidad-control input {
    width: 40px;
    text-align: center;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 5px;
}

.add-to-cart {
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 5px;
    font-size: 0.8em;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.3s;
}

.add-to-cart:hover {
    background-color: #45a049;
}

/* --- Shopping Cart Popup --- */
.shopping-cart {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 350px;
    background: white;
    border: 1px solid #ccc;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    z-index: 999;
    display: none;
    max-height: 80vh;
    overflow-y: auto;
}

.shopping-cart h2 {
    text-align: center;
    color: #d32f2f;
    margin-bottom: 15px;
}

.cart-items-list {
    list-style: none;
    padding: 0;
    margin-bottom: 15px;
    border-top: 1px solid #eee;
}

.cart-items-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px dashed #eee;
    font-size: 0.95em;
}

.cart-items-list li:last-child {
    border-bottom: none;
}

.cart-items-list li .remove-item-btn {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85em;
}

.cart-items-list li .remove-item-btn:hover {
    background-color: #d32f2f;
}

.cart-total-display {
    text-align: right;
    font-size: 1.3em;
    font-weight: bold;
    margin-top: 15px;
    color: #007bff;
    border-top: 2px solid #eee;
    padding-top: 10px;
}

.cart-actions-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 20px;
}

.cart-actions-buttons button {
    padding: 12px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 1.1em;
    transition: background-color 0.3s;
}

.cart-actions-buttons .pagar-btn {
    background-color: #28a745;
    color: white;
}

.cart-actions-buttons .pagar-btn:hover {
    background-color: #218838;
}

.cart-actions-buttons .pagar-btn i {
    margin-right: 10px;
}

.cart-actions-buttons .cerrar-cart-btn {
    background-color: #6c757d;
    color: white;
}

.cart-actions-buttons .cerrar-cart-btn:hover {
    background-color: #5a6268;
}

/* --- WhatsApp Floating Button --- */
.whatsapp-float {
    position: fixed;
    bottom: 10px;
    background-color: #25d366;
    color: white;
    padding: 5px 5px;
    border-radius: 50px;
    width: 30px;
    height: 30px;
    object-fit: cover;
    display: flex;
    align-items: center;
    gap: 2px;
    font-size: 0.8em;
    text-decoration: none;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    z-index: 10;
    transition: transform 0.3s;
}

.whatsapp-float:hover {
    transform: scale(1.05);
}

.whatsapp-float img {
    width: 20px;
    height: 20px;
}
/* --- Footer --- */
footer {
    background-color: #080808;
    color: white;
    padding: 30px 20px;
    text-align: center;
    margin-top: 50px;
}

footer .text {
    margin: 15px 0 10px;
    font-size: 1.1em;
}

.redes-sociales {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 10px;
}

.redes-sociales a img {
    width: 40px;
    height: 40px;
    border-radius: 25px;
    object-fit: contain;
    background-color: rgb(78, 77, 77);
    padding: 4px;
    box-sizing: border-box;
    transition: transform 0.3s;
}

.redes-sociales a img:hover {
    transform: translateY(-3px) scale(1.1);
}
}
    </style>
  </head>
<body>

<header class="main-header">
    <div class="header-inner">
        <nav class="user-cart">
            <div class="user-icon">
                <i class="fas fa-user" onclick="toggleLogin()"></i>
                <div class="user-auth" id="login-popup">
                    <span class="cerrar" onclick="toggleLogin()">✖</span>
                    <input type="text" id="usuario" placeholder="Usuario">
                    <input type="password" id="clave" placeholder="Contraseña">
                    <button onclick="validarLogin()">Iniciar Sesión</button>
                    <button>Registrarse</button>
                </div>
            </div>
            <div class="cart-icon">
                <i class="fas fa-shopping-cart" onclick="mostrarCarrito()"></i>
                <span class="cart-count" id="cart-count">0</span>
            </div>
            <button id="logout-btn" onclick="cerrarSesion()">Cerrar sesión</button>
        </nav>

        <div class="titulo">
            <h1>GRAN DESPENSA MOCHE</h1>
        </div>

        <div class="logo-container">
            <img src="img/CHAKUPE.png" alt="Logo de chakupe">
        </div>
    </div>
</header>

<main class="precio-container" id="productos">
    <div class="precio-item" data-product-id="1" data-product-name="CHOLO NUMBER GUAN" data-product-price="180.00">
        <div class="zoom-container">
            <img src="pisco2.jpg" alt="PISCO">
        </div>
        <h4>CHOLO NUMBER GUAN</h4>
        <h5>S/. 180.00 x UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
    <div class="precio-item" data-product-id="2" data-product-name="DJ JORA NATURAL" data-product-price="99.00">
        <div class="zoom-container">
            <img src="DJ jora natural.jpg" alt="jora natural">
        </div>
        <h4>DJ JORA NATURAL</h4>
        <h5>S/. 99.00 x UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
    <div class="precio-item" data-product-id="3" data-product-name="DJ JORA MEMBRILLO" data-product-price="99.00">
        <div class="zoom-container">
            <img src="DJ jora membrillo.jpg" alt="jora membrillo">
        </div>
        <h4>DJ JORA MEMBRILLO</h4>
        <h5>S/. 99.00 x UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
    <div class="precio-item" data-product-id="4" data-product-name="DJ MAIZ MORADO" data-product-price="99.00">
        <div class="zoom-container">
            <img src="DJ jora maiz morado.jpg" alt="jora maiz morado">
        </div>
        <h4>DJ JORA MAIZ MORADO</h4>
        <h5>S/. 99.00 x UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
    <div class="precio-item" data-product-id="5" data-product-name="PELIRROJA FOURPACK" data-product-price="290.00">
        <div class="zoom-container">
            <img src="pelirroja fourpack.jpg" alt="pelirroja fourpack">
        </div>
        <h4>PELIRROJA FOURPACK</h4>
        <h5>S/. 140.00 x 4UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
    <div class="precio-item" data-product-id="6" data-product-name="VINAGRE EL DANDY" data-product-price="180.00">
        <div class="zoom-container">
            <img src="VINAGRE DANDY.jpeg" alt="vinagre dandy">
        </div>
        <h4>VINAGRE EL DANDY</h4>
        <h5>S/. 35.00 x UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
    <div class="precio-item" data-product-id="7" data-product-name="ORO LIQUIDO SIXPACK" data-product-price="89.00">
        <div class="zoom-container">
            <img src="ORO LIQUIDO SIXPACK.jpeg" alt="oro liquido sixpack">
        </div>
        <h4>CERVEZA ORO LIQUIDO</h4>
        <h5>S/. 120.00 x 6UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
    <div class="precio-item" data-product-id="8" data-product-name="CERVEZA LA PELIRROJA" data-product-price="35.00">
        <div class="zoom-container">
            <img src="PELIRROJA BOT.jpeg" alt="pelirroja">
        </div>
        <h4>CERVEZA LA PELIRROJA</h4>
        <h5>S/. 35.00 X UND</h5>
        <div class="cantidad-control">
            <button class="restar">-</button>
            <input class="cantidad" type="number" value="1" min="1">
            <button class="sumar">+</button>
        </div>
        <button class="add-to-cart">Añadir al carrito</button>
    </div>
</main>

<div class="shopping-cart" id="carrito">
    <h2>Tu Carrito</h2>
    <ul id="cart-items-list"></ul>
    <div class="cart-total-display">
        Total: S/ <span id="total-carrito">0.00</span>
    </div>
    <div class="cart-actions-buttons">
        <button class="pagar-btn" onclick="enviarPedidoWhatsApp()">
            <i class="fab fa-whatsapp"></i> Enviar pedido por WhatsApp
        </button>
        <button class="cerrar-cart-btn" onclick="cerrarCarrito()">Cerrar</button>
    </div>
</div>

<a class="whatsapp-float" href="https://api.whatsapp.com/send?phone=51991198681&text=Hola!%20Me%20gustaría%20realizar%20un%20pedido." target="_blank">
    <img src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" width="24" alt="WhatsApp Icon"/>
    <span>¿Necesitas ayuda? ¡Contáctanos!</span>
</a>

<footer>
    <p>© 2025 derechos de autor de La Despensa Moche.</p>
    <div class="text">Encuéntranos en:</div>
    <div class="redes-sociales">
        <a href="#"><img src="https://img.icons8.com/color/48/000000/facebook-new.png" alt="Facebook"></a>
        <a href="#"><img src="https://img.icons8.com/color/48/000000/instagram-new.png" alt="Instagram"></a>
        
    </div>
</footer>
<script src="script.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {

    // Variable para rastrear el estado de inicio de sesión del usuario
    let isLoggedIn = false;

    // --- Desplazamiento suave (excepto "historia") ---
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        if (anchor.getAttribute('href') === '#historia') return;
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

    // --- Mostrar "Nuestra Historia" ---
    const historiaLink = document.getElementById('mostrar-historia');
    const historiaSection = document.getElementById('historia');
    if (historiaLink && historiaSection) {
        historiaLink.addEventListener('click', function (e) {
            e.preventDefault();
            historiaSection.classList.add('active');
            setTimeout(() => {
                historiaSection.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }, 100);
        });
    }

    // --- Carrito ---
    const carrito = [];
    const listaCarrito = document.getElementById('cart-items-list');
    const carritoDiv = document.getElementById('carrito');
    const totalCarritoElement = document.getElementById('total-carrito');
    const cartCountSpan = document.getElementById('cart-count');

    document.querySelectorAll('.cantidad-control .restar').forEach(button => {
        button.addEventListener('click', (e) => {
            const input = e.target.parentElement.querySelector('.cantidad');
            let valor = parseInt(input.value) - 1;
            input.value = Math.max(1, valor);
        });
    });

    document.querySelectorAll('.cantidad-control .sumar').forEach(button => {
        button.addEventListener('click', (e) => {
            const input = e.target.parentElement.querySelector('.cantidad');
            let valor = parseInt(input.value) + 1;
            input.value = valor;
        });
    });

    // --- CAMBIO CLAVE: Bloquear la compra sin usuario ---
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', (e) => {
            // Verificar si el usuario ha iniciado sesión
            if (!isLoggedIn) {
                alert('¡Por favor, inicia sesión para poder agregar productos al carrito!');
                return; // Detiene la ejecución si el usuario no está logueado
            }
            
            // Si el usuario está logueado, procede a añadir el producto
            const productElement = e.target.closest('.precio-item');
            const nombre = productElement.getAttribute('data-product-name');
            const precio = parseFloat(productElement.getAttribute('data-product-price'));
            const cantidad = parseInt(productElement.querySelector('.cantidad').value);

            const itemExistente = carrito.find(item => item.nombre === nombre);
            if (itemExistente) {
                itemExistente.cantidad += cantidad;
            } else {
                carrito.push({ nombre, precio, cantidad });
            }

            actualizarCarrito();
            mostrarCarrito();
        });
    });

    function actualizarCarrito() {
        listaCarrito.innerHTML = '';
        let total = 0;
        let itemCount = 0;

        carrito.forEach((item, index) => {
            const li = document.createElement('li');
            li.innerHTML = `
                <span>${item.cantidad} x ${item.nombre}</span>
                <span>S/ ${(item.precio * item.cantidad).toFixed(2)}</span>
                <button class="remove-item-btn" data-index="${index}">Eliminar</button>
            `;
            listaCarrito.appendChild(li);
            total += item.precio * item.cantidad;
            itemCount += item.cantidad;
        });

        totalCarritoElement.textContent = total.toFixed(2);
        cartCountSpan.textContent = itemCount;

        document.querySelectorAll('.remove-item-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const index = parseInt(e.target.dataset.index);
                carrito.splice(index, 1);
                actualizarCarrito();
                if (carrito.length === 0) cerrarCarrito();
            });
        });
    }

    window.mostrarCarrito = function() {
        carritoDiv.style.display = 'block';
    }

    window.cerrarCarrito = function() {
        carritoDiv.style.display = 'none';
    }

    // --- Login y Registro ---
    const loginPopup = document.getElementById("login-popup");
    const logoutBtn = document.getElementById("logout-btn");
    const userIconElem = document.querySelector('.user-icon .fas.fa-user');
    const registerBtn = document.querySelector('.user-auth button:last-child');

    window.toggleLogin = function() {
        loginPopup.style.display = (loginPopup.style.display === "flex") ? "none" : "flex";
    }

    window.validarLogin = function() {
        const user = document.getElementById('usuario').value;
        const pass = document.getElementById('clave').value;
        if (user === 'admin' && pass === '1234') {
            alert('¡Bienvenido a Despensa Chakupe!');
            loginPopup.style.display = "none";
            logoutBtn.style.display = "inline-block";
            isLoggedIn = true; // Establecer el estado a logueado
        } else {
            alert('Usuario o contraseña incorrectos.');
        }
    }
    
    // Nueva función para el registro
    window.toggleRegister = function() {
        const newUser = document.getElementById('usuario').value;
        const newPass = document.getElementById('clave').value;
        
        if (newUser && newPass) {
            alert(`¡Registro exitoso! El usuario "${newUser}" ha sido creado. Ahora puedes iniciar sesión.`);
            loginPopup.style.display = "none";
            document.getElementById('usuario').value = '';
            document.getElementById('clave').value = '';
        } else {
            alert('Por favor, ingresa un usuario y una contraseña para registrarte.');
        }
    }

    // Asignar el evento de click al botón de registrarse
    registerBtn.addEventListener('click', window.toggleRegister);

    window.cerrarSesion = function() {
        alert('Sesión cerrada.');
        logoutBtn.style.display = "none";
        isLoggedIn = false; // Restablecer el estado a deslogueado
    }

    document.addEventListener("click", function(e) {
        const cartIcon = document.querySelector(".cart-icon .fas.fa-shopping-cart");

        if (loginPopup.style.display === "flex" && !loginPopup.contains(e.target) && (!userIconElem || !userIconElem.contains(e.target))) {
            loginPopup.style.display = "none";
        }

        if (carritoDiv.style.display === "block" && !carritoDiv.contains(e.target) && (!cartIcon || !cartIcon.contains(e.target))) {
            if (!e.target.classList.contains('fa-shopping-cart') && !e.target.closest('.shopping-cart button')) {
                cerrarCarrito();
            }
        }
    });

    // --- FUNCIONALIDAD: ENVIAR PEDIDO POR WHATSAPP ---
    window.enviarPedidoWhatsApp = function() {
        if (carrito.length === 0) {
            alert("Tu carrito está vacío. ¡Añade algunos platos primero!");
            return;
        }

        const totalPagar = carrito.reduce((acc, item) => acc + item.precio * item.cantidad, 0);

        let mensaje = "¡Hola! Me gustaría hacer un pedido de Despensa Chakupe.\n\nMi pedido es:\n";

        carrito.forEach(item => {
            mensaje += `\n* ${item.nombre} - ${item.cantidad} unidad(es) - S/ ${(item.precio * item.cantidad).toFixed(2)}`;
        });

        mensaje += `\n\n*Total a pagar:* S/ ${totalPagar.toFixed(2)}`;
        mensaje += "\n\nPor favor, confirma mi pedido. ¡Gracias!";

        const numeroTelefono = "51991198681";
        const mensajeCodificado = encodeURIComponent(mensaje);
        const urlWhatsApp = `https://api.whatsapp.com/send?phone=${numeroTelefono}&text=${mensajeCodificado}`;

        window.open(urlWhatsApp, '_blank');

        carrito.length = 0;
        actualizarCarrito();
        cerrarCarrito();
    }
});
</script>
</body>

</html>
